# 录音文件识别<a name="sis_05_0045"></a>

## 前提条件<a name="section3443190201812"></a>

-   确保已按照[配置Java环境](配置Java环境.md)配置完毕。
-   确保已存在待识别的音频文件并上传OBS，示例音频可参考下载SDK压缩包文件，同时确保服务已授权访问OBS，可参考[配置OBS服务](https://support.huaweicloud.com/api-sis/sis_03_0047.html)。

## 初始化Client<a name="section19666141133411"></a>

初始化AsrCustomizationClient，其参数包括AuthInfo和SisConfig。

**表 1**  AuthInfo

<a name="table275217620616"></a>
<table><thead align="left"><tr id="row127531267616"><th class="cellrowborder" valign="top" width="14.12%" id="mcps1.2.5.1.1"><p id="p157537619610"><a name="p157537619610"></a><a name="p157537619610"></a>参数名称</p>
</th>
<th class="cellrowborder" valign="top" width="9.5%" id="mcps1.2.5.1.2"><p id="p6753969615"><a name="p6753969615"></a><a name="p6753969615"></a>是否必选</p>
</th>
<th class="cellrowborder" valign="top" width="13.34%" id="mcps1.2.5.1.3"><p id="p71061015172018"><a name="p71061015172018"></a><a name="p71061015172018"></a>参数类型</p>
</th>
<th class="cellrowborder" valign="top" width="63.04%" id="mcps1.2.5.1.4"><p id="p117531161263"><a name="p117531161263"></a><a name="p117531161263"></a>描述</p>
</th>
</tr>
</thead>
<tbody><tr id="row12753061963"><td class="cellrowborder" valign="top" width="14.12%" headers="mcps1.2.5.1.1 "><p id="p175346569"><a name="p175346569"></a><a name="p175346569"></a>ak</p>
</td>
<td class="cellrowborder" valign="top" width="9.5%" headers="mcps1.2.5.1.2 "><p id="p167531569610"><a name="p167531569610"></a><a name="p167531569610"></a>是</p>
</td>
<td class="cellrowborder" valign="top" width="13.34%" headers="mcps1.2.5.1.3 "><p id="p18106415132016"><a name="p18106415132016"></a><a name="p18106415132016"></a>String</p>
</td>
<td class="cellrowborder" valign="top" width="63.04%" headers="mcps1.2.5.1.4 "><p id="p77531268615"><a name="p77531268615"></a><a name="p77531268615"></a>用户的ak，可参考<a href="AK-SK认证.md">AK/SK认证</a>。</p>
</td>
</tr>
<tr id="row5753196864"><td class="cellrowborder" valign="top" width="14.12%" headers="mcps1.2.5.1.1 "><p id="p3753863610"><a name="p3753863610"></a><a name="p3753863610"></a>sk</p>
</td>
<td class="cellrowborder" valign="top" width="9.5%" headers="mcps1.2.5.1.2 "><p id="p553217715211"><a name="p553217715211"></a><a name="p553217715211"></a>是</p>
</td>
<td class="cellrowborder" valign="top" width="13.34%" headers="mcps1.2.5.1.3 "><p id="p4106121542011"><a name="p4106121542011"></a><a name="p4106121542011"></a>String</p>
</td>
<td class="cellrowborder" valign="top" width="63.04%" headers="mcps1.2.5.1.4 "><p id="p17531766618"><a name="p17531766618"></a><a name="p17531766618"></a>用户的sk，可参考<a href="AK-SK认证.md">AK/SK认证</a>。</p>
</td>
</tr>
<tr id="row107541762067"><td class="cellrowborder" valign="top" width="14.12%" headers="mcps1.2.5.1.1 "><p id="p127541061468"><a name="p127541061468"></a><a name="p127541061468"></a>region</p>
</td>
<td class="cellrowborder" valign="top" width="9.5%" headers="mcps1.2.5.1.2 "><p id="p9754267611"><a name="p9754267611"></a><a name="p9754267611"></a>是</p>
</td>
<td class="cellrowborder" valign="top" width="13.34%" headers="mcps1.2.5.1.3 "><p id="p13106015122013"><a name="p13106015122013"></a><a name="p13106015122013"></a>String</p>
</td>
<td class="cellrowborder" valign="top" width="63.04%" headers="mcps1.2.5.1.4 "><p id="p148991840119"><a name="p148991840119"></a><a name="p148991840119"></a>区域，如cn-north-4，参考<a href="https://support.huaweicloud.com/api-sis/sis_03_0004.html" target="_blank" rel="noopener noreferrer">终端节点</a>。</p>
</td>
</tr>
<tr id="row176430488249"><td class="cellrowborder" valign="top" width="14.12%" headers="mcps1.2.5.1.1 "><p id="p164314822417"><a name="p164314822417"></a><a name="p164314822417"></a>projectId</p>
</td>
<td class="cellrowborder" valign="top" width="9.5%" headers="mcps1.2.5.1.2 "><p id="p864414852411"><a name="p864414852411"></a><a name="p864414852411"></a>是</p>
</td>
<td class="cellrowborder" valign="top" width="13.34%" headers="mcps1.2.5.1.3 "><p id="p166441848172411"><a name="p166441848172411"></a><a name="p166441848172411"></a>String</p>
</td>
<td class="cellrowborder" valign="top" width="63.04%" headers="mcps1.2.5.1.4 "><p id="p6644194817249"><a name="p6644194817249"></a><a name="p6644194817249"></a>项目ID，同region一一对应，参考<a href="https://support.huaweicloud.com/api-sis/sis_03_0008.html" target="_blank" rel="noopener noreferrer">获取项目ID</a>。</p>
</td>
</tr>
<tr id="row475416618614"><td class="cellrowborder" valign="top" width="14.12%" headers="mcps1.2.5.1.1 "><p id="p1975416964"><a name="p1975416964"></a><a name="p1975416964"></a>endpoint</p>
</td>
<td class="cellrowborder" valign="top" width="9.5%" headers="mcps1.2.5.1.2 "><p id="p157541462615"><a name="p157541462615"></a><a name="p157541462615"></a>否</p>
</td>
<td class="cellrowborder" valign="top" width="13.34%" headers="mcps1.2.5.1.3 "><p id="p17106101512205"><a name="p17106101512205"></a><a name="p17106101512205"></a>String</p>
</td>
<td class="cellrowborder" valign="top" width="63.04%" headers="mcps1.2.5.1.4 "><p id="p19754861464"><a name="p19754861464"></a><a name="p19754861464"></a>终端节点，参考<a href="https://developer.huaweicloud.com/endpoint?SIS" target="_blank" rel="noopener noreferrer">地区和终端节点</a>。一般使用默认即可。</p>
</td>
</tr>
</tbody>
</table>

**表 2**  SisConfig

<a name="table1472511119912"></a>
<table><thead align="left"><tr id="row28221511196"><th class="cellrowborder" valign="top" width="13.950000000000001%" id="mcps1.2.5.1.1"><p id="p7822611594"><a name="p7822611594"></a><a name="p7822611594"></a>参数名称</p>
</th>
<th class="cellrowborder" valign="top" width="10.16%" id="mcps1.2.5.1.2"><p id="p782213111916"><a name="p782213111916"></a><a name="p782213111916"></a>是否必选</p>
</th>
<th class="cellrowborder" valign="top" width="12.9%" id="mcps1.2.5.1.3"><p id="p1283016116306"><a name="p1283016116306"></a><a name="p1283016116306"></a>参数类型</p>
</th>
<th class="cellrowborder" valign="top" width="62.99%" id="mcps1.2.5.1.4"><p id="p188221711898"><a name="p188221711898"></a><a name="p188221711898"></a>描述</p>
</th>
</tr>
</thead>
<tbody><tr id="row11822151111916"><td class="cellrowborder" valign="top" width="13.950000000000001%" headers="mcps1.2.5.1.1 "><p id="p88224114915"><a name="p88224114915"></a><a name="p88224114915"></a>connectionTimeout</p>
</td>
<td class="cellrowborder" valign="top" width="10.16%" headers="mcps1.2.5.1.2 "><p id="p138226111794"><a name="p138226111794"></a><a name="p138226111794"></a>否</p>
</td>
<td class="cellrowborder" valign="top" width="12.9%" headers="mcps1.2.5.1.3 "><p id="p6831141123015"><a name="p6831141123015"></a><a name="p6831141123015"></a>Integer</p>
</td>
<td class="cellrowborder" valign="top" width="62.99%" headers="mcps1.2.5.1.4 "><p id="p1882212111895"><a name="p1882212111895"></a><a name="p1882212111895"></a>连接超时，默认10000，单位ms。</p>
</td>
</tr>
<tr id="row10822511395"><td class="cellrowborder" valign="top" width="13.950000000000001%" headers="mcps1.2.5.1.1 "><p id="p139185435216"><a name="p139185435216"></a><a name="p139185435216"></a>readTimeout</p>
</td>
<td class="cellrowborder" valign="top" width="10.16%" headers="mcps1.2.5.1.2 "><p id="p1792541527"><a name="p1792541527"></a><a name="p1792541527"></a>否</p>
</td>
<td class="cellrowborder" valign="top" width="12.9%" headers="mcps1.2.5.1.3 "><p id="p49954185216"><a name="p49954185216"></a><a name="p49954185216"></a>Integer</p>
</td>
<td class="cellrowborder" valign="top" width="62.99%" headers="mcps1.2.5.1.4 "><p id="p169195465211"><a name="p169195465211"></a><a name="p169195465211"></a>读取超时，默认10000，单位ms。</p>
</td>
</tr>
</tbody>
</table>

## 请求参数<a name="section1973792616349"></a>

请求类为AsrCustomLongRequest，详见[表3](#table45631337366)。

**表 3**  AsrCustomLongRequest

<a name="table45631337366"></a>
<table><thead align="left"><tr id="row195631236363"><th class="cellrowborder" valign="top" width="13.950000000000001%" id="mcps1.2.5.1.1"><p id="p55640373620"><a name="p55640373620"></a><a name="p55640373620"></a>参数名称</p>
</th>
<th class="cellrowborder" valign="top" width="10.16%" id="mcps1.2.5.1.2"><p id="p1456420383614"><a name="p1456420383614"></a><a name="p1456420383614"></a>是否必选</p>
</th>
<th class="cellrowborder" valign="top" width="12.9%" id="mcps1.2.5.1.3"><p id="p1056412313618"><a name="p1056412313618"></a><a name="p1056412313618"></a>参数类型</p>
</th>
<th class="cellrowborder" valign="top" width="62.99%" id="mcps1.2.5.1.4"><p id="p1856419353613"><a name="p1856419353613"></a><a name="p1856419353613"></a>描述</p>
</th>
</tr>
</thead>
<tbody><tr id="row95641038369"><td class="cellrowborder" valign="top" width="13.950000000000001%" headers="mcps1.2.5.1.1 "><p id="p11564173163615"><a name="p11564173163615"></a><a name="p11564173163615"></a>dataUrl</p>
</td>
<td class="cellrowborder" valign="top" width="10.16%" headers="mcps1.2.5.1.2 "><p id="p356419323619"><a name="p356419323619"></a><a name="p356419323619"></a>是</p>
</td>
<td class="cellrowborder" valign="top" width="12.9%" headers="mcps1.2.5.1.3 "><p id="p956483123613"><a name="p956483123613"></a><a name="p956483123613"></a>String</p>
</td>
<td class="cellrowborder" valign="top" width="62.99%" headers="mcps1.2.5.1.4 "><p id="p456415333616"><a name="p456415333616"></a><a name="p456415333616"></a>OBS音频链接，目前华为云仅支持来自OBS的链接，注意OBS的region要与AuthInfo的region保持一致， 同时需要确保链接为用户个人的OBS的音频连接，不支持访问其他用户的公共读的OBS音频链接。</p>
</td>
</tr>
<tr id="row65644313369"><td class="cellrowborder" valign="top" width="13.950000000000001%" headers="mcps1.2.5.1.1 "><p id="p25641933360"><a name="p25641933360"></a><a name="p25641933360"></a>audioFormat</p>
</td>
<td class="cellrowborder" valign="top" width="10.16%" headers="mcps1.2.5.1.2 "><p id="p175641034365"><a name="p175641034365"></a><a name="p175641034365"></a>是</p>
</td>
<td class="cellrowborder" valign="top" width="12.9%" headers="mcps1.2.5.1.3 "><p id="p1356463173618"><a name="p1356463173618"></a><a name="p1356463173618"></a>String</p>
</td>
<td class="cellrowborder" valign="top" width="62.99%" headers="mcps1.2.5.1.4 "><p id="p1599448164011"><a name="p1599448164011"></a><a name="p1599448164011"></a>音频格式，具体信息请参见《API参考》中<a href="https://support.huaweicloud.com/api-sis/sis_03_0092.html" target="_blank" rel="noopener noreferrer">录音文件识别</a>章节。</p>
</td>
</tr>
<tr id="row65653319364"><td class="cellrowborder" valign="top" width="13.950000000000001%" headers="mcps1.2.5.1.1 "><p id="p145659343611"><a name="p145659343611"></a><a name="p145659343611"></a>property</p>
</td>
<td class="cellrowborder" valign="top" width="10.16%" headers="mcps1.2.5.1.2 "><p id="p115656333612"><a name="p115656333612"></a><a name="p115656333612"></a>是</p>
</td>
<td class="cellrowborder" valign="top" width="12.9%" headers="mcps1.2.5.1.3 "><p id="p105651303613"><a name="p105651303613"></a><a name="p105651303613"></a>String</p>
</td>
<td class="cellrowborder" valign="top" width="62.99%" headers="mcps1.2.5.1.4 "><p id="p1856517313618"><a name="p1856517313618"></a><a name="p1856517313618"></a>属性字符串，语言_采样率_模型，如chinese_8k_common。具体信息请参见《API参考》中<a href="https://support.huaweicloud.com/api-sis/sis_03_0092.html" target="_blank" rel="noopener noreferrer">录音文件识别</a>章节。</p>
</td>
</tr>
<tr id="row15558172874017"><td class="cellrowborder" valign="top" width="13.950000000000001%" headers="mcps1.2.5.1.1 "><p id="p8559528154012"><a name="p8559528154012"></a><a name="p8559528154012"></a>addPunc</p>
</td>
<td class="cellrowborder" valign="top" width="10.16%" headers="mcps1.2.5.1.2 "><p id="p755920281403"><a name="p755920281403"></a><a name="p755920281403"></a>否</p>
</td>
<td class="cellrowborder" valign="top" width="12.9%" headers="mcps1.2.5.1.3 "><p id="p14559192810408"><a name="p14559192810408"></a><a name="p14559192810408"></a>String</p>
</td>
<td class="cellrowborder" valign="top" width="62.99%" headers="mcps1.2.5.1.4 "><p id="p17559102814402"><a name="p17559102814402"></a><a name="p17559102814402"></a>表示是否在识别结果中添加标点，取值为yes 、 no，默认no。</p>
</td>
</tr>
<tr id="row1569381611543"><td class="cellrowborder" valign="top" width="13.950000000000001%" headers="mcps1.2.5.1.1 "><p id="p19527178105119"><a name="p19527178105119"></a><a name="p19527178105119"></a>digitNorm</p>
</td>
<td class="cellrowborder" valign="top" width="10.16%" headers="mcps1.2.5.1.2 "><p id="p652719855113"><a name="p652719855113"></a><a name="p652719855113"></a>否</p>
</td>
<td class="cellrowborder" valign="top" width="12.9%" headers="mcps1.2.5.1.3 "><p id="p252710818516"><a name="p252710818516"></a><a name="p252710818516"></a>String</p>
</td>
<td class="cellrowborder" valign="top" width="62.99%" headers="mcps1.2.5.1.4 "><p id="p64597569556"><a name="p64597569556"></a><a name="p64597569556"></a>表示是否将语音中的数字识别为阿拉伯数字，取值为yes 、 no，默认为yes。</p>
</td>
</tr>
<tr id="row12891417582"><td class="cellrowborder" valign="top" width="13.950000000000001%" headers="mcps1.2.5.1.1 "><p id="p1628924111584"><a name="p1628924111584"></a><a name="p1628924111584"></a>callbackUrl</p>
</td>
<td class="cellrowborder" valign="top" width="10.16%" headers="mcps1.2.5.1.2 "><p id="p6289204135820"><a name="p6289204135820"></a><a name="p6289204135820"></a>否</p>
</td>
<td class="cellrowborder" valign="top" width="12.9%" headers="mcps1.2.5.1.3 "><p id="p162891641115813"><a name="p162891641115813"></a><a name="p162891641115813"></a>String</p>
</td>
<td class="cellrowborder" valign="top" width="62.99%" headers="mcps1.2.5.1.4 "><p id="p1557673982617"><a name="p1557673982617"></a><a name="p1557673982617"></a>表示回调 url，用户用于接收识别结果的服务器地址， 不支持ip方式调用，url长度小于2048字节。服务请求方法为Post方式，请求体为Json格式。</p>
<a name="ul016513575276"></a><a name="ul016513575276"></a><ul id="ul016513575276"><li>如果用户使用回调方式获取识别结果，需提交该参数，处理成功后用户服务器需返回状态码为200。</li><li>如果用户使用轮询方式获取识别结果，则无需提交该参数。</li></ul>
</td>
</tr>
<tr id="row316365315528"><td class="cellrowborder" valign="top" width="13.950000000000001%" headers="mcps1.2.5.1.1 "><p id="p576455914325"><a name="p576455914325"></a><a name="p576455914325"></a>needAnalysisInfo</p>
</td>
<td class="cellrowborder" valign="top" width="10.16%" headers="mcps1.2.5.1.2 "><p id="p9164145318522"><a name="p9164145318522"></a><a name="p9164145318522"></a>否</p>
</td>
<td class="cellrowborder" valign="top" width="12.9%" headers="mcps1.2.5.1.3 "><p id="p18764659163211"><a name="p18764659163211"></a><a name="p18764659163211"></a>Boolean</p>
</td>
<td class="cellrowborder" valign="top" width="62.99%" headers="mcps1.2.5.1.4 "><p id="p341451417364"><a name="p341451417364"></a><a name="p341451417364"></a>是否选择分析信息。当前仅对8k模型有效。</p>
<p id="p177641591321"><a name="p177641591321"></a><a name="p177641591321"></a>如果选择false，则声道、话者分离、情绪检测、速度信息均无效。默认false。</p>
</td>
</tr>
<tr id="row66386593525"><td class="cellrowborder" valign="top" width="13.950000000000001%" headers="mcps1.2.5.1.1 "><p id="p1976455963219"><a name="p1976455963219"></a><a name="p1976455963219"></a>diarization</p>
</td>
<td class="cellrowborder" valign="top" width="10.16%" headers="mcps1.2.5.1.2 "><p id="p17639205916524"><a name="p17639205916524"></a><a name="p17639205916524"></a>否</p>
</td>
<td class="cellrowborder" valign="top" width="12.9%" headers="mcps1.2.5.1.3 "><p id="p17641659103217"><a name="p17641659103217"></a><a name="p17641659103217"></a>Boolean</p>
</td>
<td class="cellrowborder" valign="top" width="62.99%" headers="mcps1.2.5.1.4 "><p id="p176445913322"><a name="p176445913322"></a><a name="p176445913322"></a>是否需要话者分离，表示识别结果会包含role项，默认true。</p>
</td>
</tr>
<tr id="row143729101535"><td class="cellrowborder" valign="top" width="13.950000000000001%" headers="mcps1.2.5.1.1 "><p id="p197641859123212"><a name="p197641859123212"></a><a name="p197641859123212"></a>channel</p>
</td>
<td class="cellrowborder" valign="top" width="10.16%" headers="mcps1.2.5.1.2 "><p id="p193721010175315"><a name="p193721010175315"></a><a name="p193721010175315"></a>否</p>
</td>
<td class="cellrowborder" valign="top" width="12.9%" headers="mcps1.2.5.1.3 "><p id="p13764145973210"><a name="p13764145973210"></a><a name="p13764145973210"></a>String</p>
</td>
<td class="cellrowborder" valign="top" width="62.99%" headers="mcps1.2.5.1.4 "><p id="p11764195915321"><a name="p11764195915321"></a><a name="p11764195915321"></a>语音文件声道信息，可以为MONO（缺省)、LEFT_AGENT、RIGHT_AGENT。</p>
</td>
</tr>
<tr id="row52955149531"><td class="cellrowborder" valign="top" width="13.950000000000001%" headers="mcps1.2.5.1.1 "><p id="p177641559133216"><a name="p177641559133216"></a><a name="p177641559133216"></a>emotion</p>
</td>
<td class="cellrowborder" valign="top" width="10.16%" headers="mcps1.2.5.1.2 "><p id="p12955142532"><a name="p12955142532"></a><a name="p12955142532"></a>否</p>
</td>
<td class="cellrowborder" valign="top" width="12.9%" headers="mcps1.2.5.1.3 "><p id="p1276417597323"><a name="p1276417597323"></a><a name="p1276417597323"></a>Boolean</p>
</td>
<td class="cellrowborder" valign="top" width="62.99%" headers="mcps1.2.5.1.4 "><p id="p16764195993215"><a name="p16764195993215"></a><a name="p16764195993215"></a>是否需要做情绪检测，默认true。</p>
</td>
</tr>
<tr id="row1831114616537"><td class="cellrowborder" valign="top" width="13.950000000000001%" headers="mcps1.2.5.1.1 "><p id="p07641959153212"><a name="p07641959153212"></a><a name="p07641959153212"></a>speed</p>
</td>
<td class="cellrowborder" valign="top" width="10.16%" headers="mcps1.2.5.1.2 "><p id="p43111164539"><a name="p43111164539"></a><a name="p43111164539"></a>否</p>
</td>
<td class="cellrowborder" valign="top" width="12.9%" headers="mcps1.2.5.1.3 "><p id="p15764195993215"><a name="p15764195993215"></a><a name="p15764195993215"></a>Boolean</p>
</td>
<td class="cellrowborder" valign="top" width="62.99%" headers="mcps1.2.5.1.4 "><p id="p127641159113214"><a name="p127641159113214"></a><a name="p127641159113214"></a>是否需要输出语速信息，默认true。</p>
</td>
</tr>
<tr id="row266453364019"><td class="cellrowborder" valign="top" width="13.950000000000001%" headers="mcps1.2.5.1.1 "><p id="p17664143315404"><a name="p17664143315404"></a><a name="p17664143315404"></a>vocabularyId</p>
</td>
<td class="cellrowborder" valign="top" width="10.16%" headers="mcps1.2.5.1.2 "><p id="p126641233134010"><a name="p126641233134010"></a><a name="p126641233134010"></a>否</p>
</td>
<td class="cellrowborder" valign="top" width="12.9%" headers="mcps1.2.5.1.3 "><p id="p6664103364017"><a name="p6664103364017"></a><a name="p6664103364017"></a>String</p>
</td>
<td class="cellrowborder" valign="top" width="62.99%" headers="mcps1.2.5.1.4 "><p id="p1254929112618"><a name="p1254929112618"></a><a name="p1254929112618"></a>热词表id，不使用则不填写。</p>
<p id="p18929185814249"><a name="p18929185814249"></a><a name="p18929185814249"></a>创建热词表请参考《API参考》中<a href="https://support.huaweicloud.com/api-sis/sis_03_0071.html" target="_blank" rel="noopener noreferrer">创建热词表</a>章节。</p>
</td>
</tr>
<tr id="row99989259513"><td class="cellrowborder" valign="top" width="13.950000000000001%" headers="mcps1.2.5.1.1 "><p id="p1675322713273"><a name="p1675322713273"></a><a name="p1675322713273"></a>needWordInfo</p>
</td>
<td class="cellrowborder" valign="top" width="10.16%" headers="mcps1.2.5.1.2 "><p id="p10753627182719"><a name="p10753627182719"></a><a name="p10753627182719"></a>否</p>
</td>
<td class="cellrowborder" valign="top" width="12.9%" headers="mcps1.2.5.1.3 "><p id="p187531027172719"><a name="p187531027172719"></a><a name="p187531027172719"></a>String</p>
</td>
<td class="cellrowborder" valign="top" width="62.99%" headers="mcps1.2.5.1.4 "><p id="p175317276278"><a name="p175317276278"></a><a name="p175317276278"></a>表示是否在识别结果中输出分词结果信息，取值为<span class="parmvalue" id="parmvalue1466819217161"><a name="parmvalue1466819217161"></a><a name="parmvalue1466819217161"></a>“yes”</span>和<span class="parmvalue" id="parmvalue55206515164"><a name="parmvalue55206515164"></a><a name="parmvalue55206515164"></a>“no”</span>，默认为<span class="parmvalue" id="parmvalue76273117169"><a name="parmvalue76273117169"></a><a name="parmvalue76273117169"></a>“no”</span>。</p>
</td>
</tr>
</tbody>
</table>

## 响应参数<a name="section1290112481342"></a>

响应类为AsrCustomLongResponse，详见[表4](#table10565117114512)。

**表 4**  AsrCustomLongResponse

<a name="table10565117114512"></a>
<table><thead align="left"><tr id="row35658711458"><th class="cellrowborder" valign="top" width="13.950000000000001%" id="mcps1.2.5.1.1"><p id="p1256511794512"><a name="p1256511794512"></a><a name="p1256511794512"></a>参数名称</p>
</th>
<th class="cellrowborder" valign="top" width="10.11%" id="mcps1.2.5.1.2"><p id="p556510713452"><a name="p556510713452"></a><a name="p556510713452"></a>是否必选</p>
</th>
<th class="cellrowborder" valign="top" width="12.950000000000001%" id="mcps1.2.5.1.3"><p id="p4565177114519"><a name="p4565177114519"></a><a name="p4565177114519"></a>参数类型</p>
</th>
<th class="cellrowborder" valign="top" width="62.99%" id="mcps1.2.5.1.4"><p id="p1256517184510"><a name="p1256517184510"></a><a name="p1256517184510"></a>描述</p>
</th>
</tr>
</thead>
<tbody><tr id="row5565157134520"><td class="cellrowborder" valign="top" width="13.950000000000001%" headers="mcps1.2.5.1.1 "><p id="p1486851518462"><a name="p1486851518462"></a><a name="p1486851518462"></a>status</p>
</td>
<td class="cellrowborder" valign="top" width="10.11%" headers="mcps1.2.5.1.2 "><p id="p1566975458"><a name="p1566975458"></a><a name="p1566975458"></a>是</p>
</td>
<td class="cellrowborder" valign="top" width="12.950000000000001%" headers="mcps1.2.5.1.3 "><p id="p4868715104618"><a name="p4868715104618"></a><a name="p4868715104618"></a>String</p>
</td>
<td class="cellrowborder" valign="top" width="62.99%" headers="mcps1.2.5.1.4 "><p id="p985514704514"><a name="p985514704514"></a><a name="p985514704514"></a>描述返回状态。</p>
<a name="ul18408053164510"></a><a name="ul18408053164510"></a><ul id="ul18408053164510"><li>WAITING 等待识别。</li><li>FINISHED识别已经完成。</li><li>ERROR 识别过程中发生错误。</li></ul>
</td>
</tr>
<tr id="row15661973456"><td class="cellrowborder" valign="top" width="13.950000000000001%" headers="mcps1.2.5.1.1 "><p id="p178684155469"><a name="p178684155469"></a><a name="p178684155469"></a>createTime</p>
</td>
<td class="cellrowborder" valign="top" width="10.11%" headers="mcps1.2.5.1.2 "><p id="p4566072458"><a name="p4566072458"></a><a name="p4566072458"></a>否</p>
</td>
<td class="cellrowborder" valign="top" width="12.950000000000001%" headers="mcps1.2.5.1.3 "><p id="p6868171518465"><a name="p6868171518465"></a><a name="p6868171518465"></a>String</p>
</td>
<td class="cellrowborder" valign="top" width="62.99%" headers="mcps1.2.5.1.4 "><p id="p68681215194614"><a name="p68681215194614"></a><a name="p68681215194614"></a>任务创建时间。格式如2018-12-04T13:10:29.310Z。</p>
</td>
</tr>
<tr id="row1256617154510"><td class="cellrowborder" valign="top" width="13.950000000000001%" headers="mcps1.2.5.1.1 "><p id="p13868181534612"><a name="p13868181534612"></a><a name="p13868181534612"></a>startTime</p>
</td>
<td class="cellrowborder" valign="top" width="10.11%" headers="mcps1.2.5.1.2 "><p id="p1856618724517"><a name="p1856618724517"></a><a name="p1856618724517"></a>否</p>
</td>
<td class="cellrowborder" valign="top" width="12.950000000000001%" headers="mcps1.2.5.1.3 "><p id="p188681015134619"><a name="p188681015134619"></a><a name="p188681015134619"></a>String</p>
</td>
<td class="cellrowborder" valign="top" width="62.99%" headers="mcps1.2.5.1.4 "><p id="p086851511465"><a name="p086851511465"></a><a name="p086851511465"></a>开始识别时间。格式如2018-12-04T13:10:29.310Z。</p>
</td>
</tr>
<tr id="row180181805719"><td class="cellrowborder" valign="top" width="13.950000000000001%" headers="mcps1.2.5.1.1 "><p id="p1086841514463"><a name="p1086841514463"></a><a name="p1086841514463"></a>finishTime</p>
</td>
<td class="cellrowborder" valign="top" width="10.11%" headers="mcps1.2.5.1.2 "><p id="p8821318135716"><a name="p8821318135716"></a><a name="p8821318135716"></a>否</p>
</td>
<td class="cellrowborder" valign="top" width="12.950000000000001%" headers="mcps1.2.5.1.3 "><p id="p188682015194615"><a name="p188682015194615"></a><a name="p188682015194615"></a>String</p>
</td>
<td class="cellrowborder" valign="top" width="62.99%" headers="mcps1.2.5.1.4 "><p id="p13868131518464"><a name="p13868131518464"></a><a name="p13868131518464"></a>识别完成时间。格式如2018-12-04T13:10:29.310Z。</p>
</td>
</tr>
<tr id="row3899132219586"><td class="cellrowborder" valign="top" width="13.950000000000001%" headers="mcps1.2.5.1.1 "><p id="p969216287282"><a name="p969216287282"></a><a name="p969216287282"></a>segments</p>
</td>
<td class="cellrowborder" valign="top" width="10.11%" headers="mcps1.2.5.1.2 "><p id="p66921282283"><a name="p66921282283"></a><a name="p66921282283"></a>否</p>
</td>
<td class="cellrowborder" valign="top" width="12.950000000000001%" headers="mcps1.2.5.1.3 "><p id="p11840520193217"><a name="p11840520193217"></a><a name="p11840520193217"></a>Array of objects</p>
</td>
<td class="cellrowborder" valign="top" width="62.99%" headers="mcps1.2.5.1.4 "><p id="p8692928162817"><a name="p8692928162817"></a><a name="p8692928162817"></a>识别结果, 多句结果的数组。</p>
<p id="p1069215287283"><a name="p1069215287283"></a><a name="p1069215287283"></a>数据结构参见<a href="#table235014283281">表5</a>。</p>
</td>
</tr>
</tbody>
</table>

**表 5**  Segment

<a name="table235014283281"></a>
<table><thead align="left"><tr id="row069242818289"><th class="cellrowborder" valign="top" width="19.81%" id="mcps1.2.5.1.1"><p id="p8692828112814"><a name="p8692828112814"></a><a name="p8692828112814"></a>参数名</p>
</th>
<th class="cellrowborder" valign="top" width="16.96%" id="mcps1.2.5.1.2"><p id="p14692328112814"><a name="p14692328112814"></a><a name="p14692328112814"></a>是否必选</p>
</th>
<th class="cellrowborder" valign="top" width="15.27%" id="mcps1.2.5.1.3"><p id="p186921928192812"><a name="p186921928192812"></a><a name="p186921928192812"></a>参数类型</p>
</th>
<th class="cellrowborder" valign="top" width="47.96%" id="mcps1.2.5.1.4"><p id="p46921728142819"><a name="p46921728142819"></a><a name="p46921728142819"></a>说明</p>
</th>
</tr>
</thead>
<tbody><tr id="row669214289281"><td class="cellrowborder" valign="top" width="19.81%" headers="mcps1.2.5.1.1 "><p id="p12692112822813"><a name="p12692112822813"></a><a name="p12692112822813"></a>start_time</p>
</td>
<td class="cellrowborder" valign="top" width="16.96%" headers="mcps1.2.5.1.2 "><p id="p13692182811282"><a name="p13692182811282"></a><a name="p13692182811282"></a>是</p>
</td>
<td class="cellrowborder" valign="top" width="15.27%" headers="mcps1.2.5.1.3 "><p id="p1669218281281"><a name="p1669218281281"></a><a name="p1669218281281"></a>Integer</p>
</td>
<td class="cellrowborder" valign="top" width="47.96%" headers="mcps1.2.5.1.4 "><p id="p1693122852810"><a name="p1693122852810"></a><a name="p1693122852810"></a>一句的起始时间戳，单位ms。</p>
</td>
</tr>
<tr id="row19693182819282"><td class="cellrowborder" valign="top" width="19.81%" headers="mcps1.2.5.1.1 "><p id="p196933280284"><a name="p196933280284"></a><a name="p196933280284"></a>end_time</p>
</td>
<td class="cellrowborder" valign="top" width="16.96%" headers="mcps1.2.5.1.2 "><p id="p18693152813282"><a name="p18693152813282"></a><a name="p18693152813282"></a>是</p>
</td>
<td class="cellrowborder" valign="top" width="15.27%" headers="mcps1.2.5.1.3 "><p id="p146936288286"><a name="p146936288286"></a><a name="p146936288286"></a>Integer</p>
</td>
<td class="cellrowborder" valign="top" width="47.96%" headers="mcps1.2.5.1.4 "><p id="p13693192810281"><a name="p13693192810281"></a><a name="p13693192810281"></a>一句的结束时间戳，单位ms。</p>
</td>
</tr>
<tr id="row1869318283282"><td class="cellrowborder" valign="top" width="19.81%" headers="mcps1.2.5.1.1 "><p id="p13693112815283"><a name="p13693112815283"></a><a name="p13693112815283"></a>result</p>
</td>
<td class="cellrowborder" valign="top" width="16.96%" headers="mcps1.2.5.1.2 "><p id="p1693028122817"><a name="p1693028122817"></a><a name="p1693028122817"></a>是</p>
</td>
<td class="cellrowborder" valign="top" width="15.27%" headers="mcps1.2.5.1.3 "><p id="p96939288288"><a name="p96939288288"></a><a name="p96939288288"></a>Object</p>
</td>
<td class="cellrowborder" valign="top" width="47.96%" headers="mcps1.2.5.1.4 "><p id="p9693192852819"><a name="p9693192852819"></a><a name="p9693192852819"></a>调用成功表示识别结果，调用失败时无此字段。数据结构参见<a href="#table736482819285">表6</a>。</p>
</td>
</tr>
</tbody>
</table>

**表 6**  Result

<a name="table736482819285"></a>
<table><thead align="left"><tr id="row1693528132811"><th class="cellrowborder" valign="top" width="19.75%" id="mcps1.2.5.1.1"><p id="p1069318286287"><a name="p1069318286287"></a><a name="p1069318286287"></a>参数名</p>
</th>
<th class="cellrowborder" valign="top" width="17.02%" id="mcps1.2.5.1.2"><p id="p569312817289"><a name="p569312817289"></a><a name="p569312817289"></a>是否必选</p>
</th>
<th class="cellrowborder" valign="top" width="15.27%" id="mcps1.2.5.1.3"><p id="p46931728152815"><a name="p46931728152815"></a><a name="p46931728152815"></a>参数类型</p>
</th>
<th class="cellrowborder" valign="top" width="47.96%" id="mcps1.2.5.1.4"><p id="p369382818289"><a name="p369382818289"></a><a name="p369382818289"></a>说明</p>
</th>
</tr>
</thead>
<tbody><tr id="row9693152813281"><td class="cellrowborder" valign="top" width="19.75%" headers="mcps1.2.5.1.1 "><p id="p13693728162811"><a name="p13693728162811"></a><a name="p13693728162811"></a>text</p>
</td>
<td class="cellrowborder" valign="top" width="17.02%" headers="mcps1.2.5.1.2 "><p id="p06941828132813"><a name="p06941828132813"></a><a name="p06941828132813"></a>是</p>
</td>
<td class="cellrowborder" valign="top" width="15.27%" headers="mcps1.2.5.1.3 "><p id="p206941528162817"><a name="p206941528162817"></a><a name="p206941528162817"></a>String</p>
</td>
<td class="cellrowborder" valign="top" width="47.96%" headers="mcps1.2.5.1.4 "><p id="p10694028112812"><a name="p10694028112812"></a><a name="p10694028112812"></a>识别结果文本。</p>
</td>
</tr>
<tr id="row13694428182810"><td class="cellrowborder" valign="top" width="19.75%" headers="mcps1.2.5.1.1 "><p id="p1169492816289"><a name="p1169492816289"></a><a name="p1169492816289"></a>analysis_info</p>
</td>
<td class="cellrowborder" valign="top" width="17.02%" headers="mcps1.2.5.1.2 "><p id="p7694142812817"><a name="p7694142812817"></a><a name="p7694142812817"></a>否</p>
</td>
<td class="cellrowborder" valign="top" width="15.27%" headers="mcps1.2.5.1.3 "><p id="p769402812812"><a name="p769402812812"></a><a name="p769402812812"></a>Object</p>
</td>
<td class="cellrowborder" valign="top" width="47.96%" headers="mcps1.2.5.1.4 "><p id="p18694152862813"><a name="p18694152862813"></a><a name="p18694152862813"></a>每一句的质检分析结果对象。</p>
<p id="p1469432832816"><a name="p1469432832816"></a><a name="p1469432832816"></a>仅在识别配置中的need_analysis_info不为null时存在该返回结果。数据结构参见<a href="#table1840612815283">表7</a>。</p>
</td>
</tr>
<tr id="row08521322669"><td class="cellrowborder" valign="top" width="19.75%" headers="mcps1.2.5.1.1 "><p id="p16518261956"><a name="p16518261956"></a><a name="p16518261956"></a><span>word_info</span></p>
</td>
<td class="cellrowborder" valign="top" width="17.02%" headers="mcps1.2.5.1.2 "><p id="p19651132611516"><a name="p19651132611516"></a><a name="p19651132611516"></a>否</p>
</td>
<td class="cellrowborder" valign="top" width="15.27%" headers="mcps1.2.5.1.3 "><p id="p13651526855"><a name="p13651526855"></a><a name="p13651526855"></a>Array of Object</p>
</td>
<td class="cellrowborder" valign="top" width="47.96%" headers="mcps1.2.5.1.4 "><p id="p665112620516"><a name="p665112620516"></a><a name="p665112620516"></a>分词输出列表。</p>
</td>
</tr>
</tbody>
</table>

**表 7**  Analysisinfo

<a name="table1840612815283"></a>
<table><thead align="left"><tr id="row369402820284"><th class="cellrowborder" valign="top" width="22.12%" id="mcps1.2.5.1.1"><p id="p2694528182814"><a name="p2694528182814"></a><a name="p2694528182814"></a>参数名</p>
</th>
<th class="cellrowborder" valign="top" width="14.610000000000001%" id="mcps1.2.5.1.2"><p id="p56941828122820"><a name="p56941828122820"></a><a name="p56941828122820"></a>是否必选</p>
</th>
<th class="cellrowborder" valign="top" width="15.310000000000002%" id="mcps1.2.5.1.3"><p id="p1569482822813"><a name="p1569482822813"></a><a name="p1569482822813"></a>参数类型</p>
</th>
<th class="cellrowborder" valign="top" width="47.96%" id="mcps1.2.5.1.4"><p id="p10694628152811"><a name="p10694628152811"></a><a name="p10694628152811"></a>说明</p>
</th>
</tr>
</thead>
<tbody><tr id="row11694192820283"><td class="cellrowborder" valign="top" width="22.12%" headers="mcps1.2.5.1.1 "><p id="p9694228182820"><a name="p9694228182820"></a><a name="p9694228182820"></a>role</p>
</td>
<td class="cellrowborder" valign="top" width="14.610000000000001%" headers="mcps1.2.5.1.2 "><p id="p369402819287"><a name="p369402819287"></a><a name="p369402819287"></a>否</p>
</td>
<td class="cellrowborder" valign="top" width="15.310000000000002%" headers="mcps1.2.5.1.3 "><p id="p2694172842819"><a name="p2694172842819"></a><a name="p2694172842819"></a>String</p>
</td>
<td class="cellrowborder" valign="top" width="47.96%" headers="mcps1.2.5.1.4 "><p id="p106949285287"><a name="p106949285287"></a><a name="p106949285287"></a>角色类型，目前仅支持 AGENT（座席），USER（用户）。</p>
</td>
</tr>
<tr id="row1569416280283"><td class="cellrowborder" valign="top" width="22.12%" headers="mcps1.2.5.1.1 "><p id="p2069410288283"><a name="p2069410288283"></a><a name="p2069410288283"></a>emotion</p>
</td>
<td class="cellrowborder" valign="top" width="14.610000000000001%" headers="mcps1.2.5.1.2 "><p id="p76941228122811"><a name="p76941228122811"></a><a name="p76941228122811"></a>否</p>
</td>
<td class="cellrowborder" valign="top" width="15.310000000000002%" headers="mcps1.2.5.1.3 "><p id="p13694162810289"><a name="p13694162810289"></a><a name="p13694162810289"></a>String</p>
</td>
<td class="cellrowborder" valign="top" width="47.96%" headers="mcps1.2.5.1.4 "><p id="p1269502872817"><a name="p1269502872817"></a><a name="p1269502872817"></a>情绪类型，目前仅支持NORMAL（正常），ANGRY（愤怒）。</p>
<p id="p2069515287286"><a name="p2069515287286"></a><a name="p2069515287286"></a>在识别配置中emotion为true时存在。</p>
</td>
</tr>
<tr id="row14695152818286"><td class="cellrowborder" valign="top" width="22.12%" headers="mcps1.2.5.1.1 "><p id="p9695162811285"><a name="p9695162811285"></a><a name="p9695162811285"></a>speed</p>
</td>
<td class="cellrowborder" valign="top" width="14.610000000000001%" headers="mcps1.2.5.1.2 "><p id="p20695122812282"><a name="p20695122812282"></a><a name="p20695122812282"></a>否</p>
</td>
<td class="cellrowborder" valign="top" width="15.310000000000002%" headers="mcps1.2.5.1.3 "><p id="p13237181344"><a name="p13237181344"></a><a name="p13237181344"></a>Float</p>
</td>
<td class="cellrowborder" valign="top" width="47.96%" headers="mcps1.2.5.1.4 "><p id="p1969572810287"><a name="p1969572810287"></a><a name="p1969572810287"></a>语速信息，单位是每秒字数。</p>
<p id="p9695142802819"><a name="p9695142802819"></a><a name="p9695142802819"></a>在识别配置中speed为true时存在。</p>
</td>
</tr>
</tbody>
</table>

**表 8**  Word\_info 数据结构

<a name="table154291536145211"></a>
<table><thead align="left"><tr id="row154291236105212"><th class="cellrowborder" valign="top" width="25%" id="mcps1.2.5.1.1"><p id="p7599133785412"><a name="p7599133785412"></a><a name="p7599133785412"></a>参数名</p>
</th>
<th class="cellrowborder" valign="top" width="14.04%" id="mcps1.2.5.1.2"><p id="p642917366527"><a name="p642917366527"></a><a name="p642917366527"></a>是否必选</p>
</th>
<th class="cellrowborder" valign="top" width="15.61%" id="mcps1.2.5.1.3"><p id="p1866554515548"><a name="p1866554515548"></a><a name="p1866554515548"></a>参数类型</p>
</th>
<th class="cellrowborder" valign="top" width="45.35%" id="mcps1.2.5.1.4"><p id="p8942134765414"><a name="p8942134765414"></a><a name="p8942134765414"></a>说明</p>
</th>
</tr>
</thead>
<tbody><tr id="row4429236155211"><td class="cellrowborder" valign="top" width="25%" headers="mcps1.2.5.1.1 "><p id="p14429173613525"><a name="p14429173613525"></a><a name="p14429173613525"></a>start_time</p>
</td>
<td class="cellrowborder" valign="top" width="14.04%" headers="mcps1.2.5.1.2 "><p id="p164291636195216"><a name="p164291636195216"></a><a name="p164291636195216"></a>否</p>
</td>
<td class="cellrowborder" valign="top" width="15.61%" headers="mcps1.2.5.1.3 "><p id="p1842933617526"><a name="p1842933617526"></a><a name="p1842933617526"></a>Integer</p>
</td>
<td class="cellrowborder" valign="top" width="45.35%" headers="mcps1.2.5.1.4 "><p id="p1356222345613"><a name="p1356222345613"></a><a name="p1356222345613"></a>起始时间</p>
</td>
</tr>
<tr id="row13429163685215"><td class="cellrowborder" valign="top" width="25%" headers="mcps1.2.5.1.1 "><p id="p242963617528"><a name="p242963617528"></a><a name="p242963617528"></a>end_time</p>
</td>
<td class="cellrowborder" valign="top" width="14.04%" headers="mcps1.2.5.1.2 "><p id="p942953695218"><a name="p942953695218"></a><a name="p942953695218"></a>否</p>
</td>
<td class="cellrowborder" valign="top" width="15.61%" headers="mcps1.2.5.1.3 "><p id="p6429193610524"><a name="p6429193610524"></a><a name="p6429193610524"></a>Integer</p>
</td>
<td class="cellrowborder" valign="top" width="45.35%" headers="mcps1.2.5.1.4 "><p id="p1819992716561"><a name="p1819992716561"></a><a name="p1819992716561"></a>结束时间</p>
</td>
</tr>
<tr id="row19429936165217"><td class="cellrowborder" valign="top" width="25%" headers="mcps1.2.5.1.1 "><p id="p134291936135218"><a name="p134291936135218"></a><a name="p134291936135218"></a>word</p>
</td>
<td class="cellrowborder" valign="top" width="14.04%" headers="mcps1.2.5.1.2 "><p id="p1342933625213"><a name="p1342933625213"></a><a name="p1342933625213"></a>否</p>
</td>
<td class="cellrowborder" valign="top" width="15.61%" headers="mcps1.2.5.1.3 "><p id="p6429193617525"><a name="p6429193617525"></a><a name="p6429193617525"></a>String</p>
</td>
<td class="cellrowborder" valign="top" width="45.35%" headers="mcps1.2.5.1.4 "><p id="p173621931145620"><a name="p173621931145620"></a><a name="p173621931145620"></a>分词</p>
</td>
</tr>
</tbody>
</table>

## 代码示例<a name="section204147153364"></a>

```
import com.huawei.sis.bean.SisConfig;
import com.huawei.sis.bean.SisConstant;
import com.huawei.sis.bean.request.AsrCustomLongRequest;
import com.huawei.sis.bean.response.AsrCustomLongResponse;
import com.huawei.sis.bean.request.AsrCustomShortRequest;
import com.huawei.sis.bean.response.AsrCustomShortResponse;
import com.huawei.sis.bean.AuthInfo;
import com.huawei.sis.client.AsrCustomizationClient;
import com.huawei.sis.exception.SisException;
import com.huawei.sis.util.IOUtils;
import com.huawei.sis.util.JsonUtils;

/**
 * 录音文件识别Demo
 *
 * Copyright 2021 Huawei Technologies Co.,Ltd.
 */
public class AsrCustomizationDemo {
  private static final int SLEEP_TIME = 500;
  private static final int MAX_POLLING_NUMS = 1000;

  private String ak = "";
  private String sk = "";
  private String region = "";    // 区域，如cn-north-1、cn-north-4
  private String projectId = ""; // 项目id。登录管理控制台，鼠标移动到右上角的用户名上，在下拉列表中选择我的凭证，在项目列表中查看项目id。多项目时，展开“所属区域”，从“项目ID”列获取子项目ID。
 
 /**
   *   todo 请正确填写音频格式和模型属性字符串
   *   1. 音频格式一定要相匹配.
   *      例如obs url是xx.wav, 则在录音文件识别格式是auto。
   *      例如音频是pcm格式，并且采样率为8k，则格式填写pcm8k16bit。
   *      如果返回audio_format is invalid 说明该文件格式不支持。
   *
   *   2. 音频采样率要与属性字符串的采样率要匹配。
   *      例如格式选择pcm16k16bit，属性字符串却选择chinese_8k_common, 则属于采样率不匹配
   *      例如wav本身是16k采样率，属性选择chinese_8k_common, 同样属于采样率不匹配
   *
   *   3. 用户可以通过使用热词，识别专业术语，增加语句识别准确率。
   */

  // 录音文件识别参数
  private String obsUrl = "";           // 音频文件OBS链接，录音文件识别目前仅支持传入OBS音频连接
  private String obsAudioFormat = "";   // 文件格式，如auto等
  private String obsProperty = "";      // 属性字符串，如chinese_8k_common等
  /**
   * 设置录音文件识别参数，所有参数均有默认值，不配置也可使用
   *
   * @param request 录音文件识别请求
   */
  private void setLongParameter(AsrCustomLongRequest request) {
    // 设置否是添加标点，yes 或no， 默认是no
    request.setAddPunc("yes");
    // 设置是否将语音中的数字转写为阿拉伯数字，yes或no，默认yes
    request.setDigitNorm("no");
    // 设置声道，MONO/LEFT_AGENT/RIGHT_AGENT, 默认是单声道MONO
    request.setChannel("MONO");
    // 设置是否需要分析，默认为false。当前仅支持8k采样率音频。当其设置为true时，话者分离、情绪检测，速度、声道才生效。
    request.setNeedAnalysis(true);
    // 设置是否需要话者分离，若是，则识别结果包含role，默认true
    request.setDirization(true);
    // 设置是否需要情绪检测，默认true。
    request.setEmotion(true);
    // 设置是否需要速度。默认true。
    request.setSpeed(true);
    // 设置回调地址，设置后音频转写结果将直接发送至回调地址。请务必保证地址可联通,不支持ip地址。
    // request.setCallbackUrl("");
    // 设置热词id，不使用则不用填写
    // request.setVocabularyId("");
  }

  /**
   * 定义config，所有参数可选，设置超时时间等。
   *
   * @return SisConfig
   */
  private SisConfig getConfig() {
    SisConfig config = new SisConfig();
    // 设置连接超时，默认10000ms
    config.setConnectionTimeout(SisConstant.DEFAULT_CONNECTION_TIMEOUT);
    // 设置读取超时，默认10000ms
    config.setReadTimeout(SisConstant.DEFAULT_READ_TIMEOUT);
    // 设置代理, 一定要确保代理可用才启动此设置。 代理初始化也可用不加密的代理，new ProxyHostInfo(host, port);
    // ProxyHostInfo proxy = new ProxyHostInfo(host, port, username, password);
    // config.setProxy(proxy);
    return config;
  }


  /**
   * 录音文件识别demo
   */
  private void longDemo() {
    try {
      // 1. 初始化AsrCustomizationClient
      // 定义authInfo，根据ak，sk，region,projectId.
      AuthInfo authInfo = new AuthInfo(ak, sk, region, projectId);
      // 设置config，主要与超时有关
      SisConfig config = getConfig();
      // 根据authInfo和config，构造AsrCustomizationClient
      AsrCustomizationClient asr = new AsrCustomizationClient(authInfo, config);

      // 2. 生成请求
      AsrCustomLongRequest request = new AsrCustomLongRequest(obsUrl, obsAudioFormat, obsProperty);
      // 设置请求参数，所有参数均为可选
      setLongParameter(request);

      // 3. 提交任务，获取jobId
      String jobId = asr.submitJob(request);

      // 4 轮询jobId，获取最终结果。
      int count = 0;   
      int successFlag = 0;
      AsrCustomLongResponse response = null;
      while (count < MAX_POLLING_NUMS) {
        System.out.println("正在进行第" + count + "次尝试");
        response = asr.getAsrLongResponse(jobId);
        String status = response.getStatus();
        if (status.equals("FINISHED")) {
          successFlag = 1;
          break;
        } else if (status.equals("ERROR")) {
          System.out.println("执行失败, 无法根据jobId获取结果");
          return;
        }
        try {
          Thread.sleep(SLEEP_TIME);
        } catch (InterruptedException e) {
          e.printStackTrace();
        }
        count++;
      }
      // 打印结果
      if (successFlag == 0) {
        System.out.println("已进行" + count + "次尝试，无法获取识别结果。 jobId为 " + jobId);
        return;
      }

      System.out.println(JsonUtils.obj2Str(response, true));
    } catch (SisException e) {
      e.printStackTrace();
      System.out.println("error_code:" + e.getErrorCode() + "\nerror_msg:" + e.getErrorMsg());
    }
  }

  public static void main(String[] args) {
    AsrCustomizationDemo demo = new AsrCustomizationDemo();
    // 录音文件识别
    demo.longDemo();
  }
}
```

